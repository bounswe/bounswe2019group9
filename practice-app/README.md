# Practice-App

Will be live at [ass7.bounswe2019group9.tk](ass7.bounswe2019group9.tk)

This folder is devoted to the [Assignment 7, Practice API](https://github.com/bounswe/bounswe2019group9/wiki/Assignment-7)

## Project Folder Structure
```
practice-app
├── LICENSE                 # License information
├── README.md               # This readme file
├── appspec.yml             # Details for Amazon Server EC2 Deployment
├── uwsgi-conf.ini          # Details for uWSGI configuration for Production Server
├── scripts                 # A folder consisting of scripts to be run in the Production Server
├── docs                    # Documentation of the project (docs is a folder)
├── manage.py               # Django CLI file
├── requirements.txt        # Project Dependencies (pip install -r requirements.txt)
├── prod_requirements.txt   # Extra Project Dependencies for Production Environment (Server)
├── practice_app            # Main Project Settings & Details
│   ├── __init__.py             # empty init file to make practice_app importable
│   ├── base_settings.py        # Most Django Environemnt Settings such as timezone 
│   ├── settings.py             # Development Environemnt Settings that inherit from base_settings.py
│   ├── prod_settings.py        # Production Environemnt Settings that inherit from base_settings.py
│   ├── urls.py                 # url mappings to custom subapps and admin subapp.
│   └── wsgi.py                 # not sure if this is used (autogenerated by django)
└── subapp                  # Sample Django App
    ├── __init__.py             # empty init file to make subapp importable
    ├── admin.py                # Admin permissions, definitions for subapp
    ├── apps.py                 # subapp App settings / configuration
    ├── docs                    # Documentation of the subapp (docs is a folder)
    ├── migrations              # db migrations & seeds
    │   ├── 0001_initial.py         # generated from model (python manage.py makemigrations)
    │   ├── __init__.py             # empty init file to make migrations importable
    ├── models.py               # model definitions for db  
    ├── static                  # static files (css/js/img) for subapp
    │   └── subapp                  # namespacing subapp to prevent ambiguity for django
    │       ├── images                  # images folder to hold images for subapp
    │       │   ├── sample.gif          # sample image
    │       │   └── background.png      # another sample image
    │       └── style.css           # sample stylesheet for subapp
    ├── templates               # template files (django html) for subapp
    │   └── subapp                  # namespacing subapp to prevent ambiguity for django
    │       ├── etc.html                # sample django template html
    │       ├── index.html              # another sample django template html
    │       └── somethingelse.html      # yet another sample django template html
    ├── tests.py                # tests of subapp
    ├── urls.py                 # url mappings to views of subapp
    └── views.py                # define WHAT HAPPENS ON EACH REQUEST IN SUBAPP


```

## DB
In production environment MySQL (MariaDB) is used, in development environment SQLite is used, so you do not need to deal with any of the db settings. Creating models & migrations via Django would suffice.



## Running In Production

You should run in development mode in your own machines, however, if you would like to deploy this project to your 
own server you should prepare a `secret.json` file that contains below fields:
```json
{
  "SECRET_KEY": "series of random characters",
  "DB_NAME": "mysql db name",
  "DB_USER": "mysql db user",
  "DB_PASSWORD": "mysql user password",
  "STATIC_ROOT": "root folder for collectstatic command"
}
```


## Django Apps

* Each API will be created as a different django app under this django project.

### Adding a new App

* To do so, run `python manage.py createapp your_app_name`
* Create or change the file `your_app_name/apps.py` to
```python
from django.apps import AppConfig


class YourAppNameConfig(AppConfig):
    name = 'your_app_name'
```
* In the file `practice_app/base_settings.py` find `INSTALLED_APPS` and add `your_app_name.apps.YourAppNameConfig` as below.
```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'your_app_name.apps.YourAppNameConfig'
]
```
* In the file `your_app_name/urls.py` add `app_name = 'your_app_name'` to the global scope

* In the file `practice_app/urls.py` add `path('your_app_name', include('your_app_name.urls'))` to `urlpatterns` as such: 
```python
from django.contrib import admin
from django.urls import include, path

urlpatterns = [
    path('admin/', admin.site.urls),
    path('your-app-url-path-such-as-your-app-name/', include('your_app_name.urls')),
]
```
* Rest of all you do will most probably be within your app, however, if you require or use a new python library make sure that you add it to requirements.txt
(In production server, both libraries in prod_requirements.txt and requirements.txt will be loaded, so adding your new library only to requirements.txt would suffice)